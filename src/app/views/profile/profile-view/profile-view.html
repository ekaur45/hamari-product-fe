@if(profile() && !isLoading()) {
<div class="w-full min-h-screen bg-gray-50 pb-8">
    <!-- Profile Header with Cover -->
    <div class="w-full bg-gradient-to-r from-primary/40 via-primary/20 to-primary/40 relative overflow-hidden mb-8">
        <div class="absolute inset-0 bg-black/10"></div>
        <div class="relative w-full mx-auto px-4 sm:px-6 lg:px-8 pt-8 pb-16">
            <div class="flex flex-col md:flex-row items-center md:items-end gap-6">
                <!-- Profile Picture -->
                <div class="relative flex-shrink-0">
                    <div class="relative">
                        @if(profile()?.details?.profileImage) {
                            <img [src]="assetsUrl + profile()?.details?.profileImage" alt="Profile Image"
                                class="w-32 h-32 md:w-40 md:h-40 rounded-full object-cover border-4 border-white shadow-2xl">
                        } @else {
                            <div class="w-32 h-32 md:w-40 md:h-40 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-white text-4xl md:text-5xl font-bold border-4 border-white shadow-2xl">
                                {{profile()!.firstName!.charAt(0) + profile()!.lastName!.charAt(0)}}
                            </div>
                        }
                        <label id="uploadPhotoBtn"
                            class="absolute bottom-2 right-2 w-10 h-10 bg-white rounded-full flex items-center justify-center text-primary hover:bg-gray-100 transition shadow-lg cursor-pointer">
                            <i class="fas fa-camera text-sm"></i>
                            <input type="file" id="profilePhoto" accept="image/*" class="hidden"
                                (change)="onProfilePhotoChange($event)">
                        </label>
                    </div>
                </div>

                <!-- Profile Info -->
                <div class="flex-1 w-full text-center md:text-left text-white">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4">
                        <div class="w-full">
                            <h1 class="text-3xl md:text-4xl font-bold mb-2">
                                {{profile()?.firstName ?? ""}} {{profile()?.lastName ?? ""}}
                            </h1>
                            <div class="flex items-center justify-center md:justify-start gap-3 flex-wrap">
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white/20 backdrop-blur-sm">
                                    <i class="fas fa-user-tag mr-2"></i>
                                    {{profile()?.role ?? ""}}
                                </span>
                                @if(profile()?.teacher?.isVerified) {
                                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-500/20 backdrop-blur-sm border border-green-300/50">
                                        <i class="fas fa-check-circle mr-2"></i>
                                        Verified
                                    </span>
                                }
                            </div>
                        </div>
                        <a [routerLink]="['/profile/edit',1]"
                            class="inline-flex items-center justify-center px-6 py-3 bg-white text-primary rounded-lg font-semibold hover:bg-gray-100 transition shadow-lg hover:shadow-xl flex-shrink-0">
                            <i class="fas fa-edit mr-2"></i>
                            <span>Edit Profile</span>
                        </a>
                    </div>
                    
                    @if(profile()?.role === UserRole.TEACHER && profile()?.teacher?.tagline) {
                        <p class="text-lg text-white/90 italic mb-2">{{profile()?.teacher?.tagline}}</p>
                    }
                    @else if(profile()?.role === UserRole.STUDENT && profile()?.student?.tagline) {
                        <p class="text-lg text-white/90 italic mb-2">{{profile()?.student?.tagline}}</p>
                    }
                    @else if(profile()?.details?.bio) {
                        <p class="text-lg text-white/90 italic mb-2">{{profile()?.details?.bio}}</p>
                    }
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="w-full mx-auto">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 w-full">
            <!-- Left Column: Profile Details -->
            <div class="lg:col-span-1 space-y-6 w-full">
                <!-- Contact Information Card -->
                <div class="bg-white rounded-2xl shadow-sm overflow-hidden border border-gray-200 w-full hover:shadow-md transition-shadow duration-300">
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-5 border-b border-gray-200">
                        <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                            <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-address-card text-blue-600"></i>
                            </div>
                            <span>Contact Information</span>
                        </h3>
                    </div>
                    <div class="p-6 space-y-4">
                        <div class="flex items-start gap-4 group hover:bg-blue-50/50 rounded-xl p-4 -mx-2 transition-all duration-200 cursor-pointer border border-transparent hover:border-blue-200">
                            <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:bg-blue-200 group-hover:scale-110 transition-all duration-200">
                                <i class="fas fa-envelope text-blue-600"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-xs text-gray-500 mb-1.5 font-semibold uppercase tracking-wide">Email</p>
                                <p class="text-sm text-gray-900 break-all font-semibold leading-relaxed">{{profile()?.email ?? "-"}}</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-4 group hover:bg-green-50/50 rounded-xl p-4 -mx-2 transition-all duration-200 cursor-pointer border border-transparent hover:border-green-200">
                            <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:bg-green-200 group-hover:scale-110 transition-all duration-200">
                                <i class="fas fa-phone text-green-600"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-xs text-gray-500 mb-1.5 font-semibold uppercase tracking-wide">Phone</p>
                                <p class="text-sm text-gray-900 font-semibold leading-relaxed">{{profile()?.details?.phone ?? "-"}}</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-4 group hover:bg-purple-50/50 rounded-xl p-4 -mx-2 transition-all duration-200 cursor-pointer border border-transparent hover:border-purple-200">
                            <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:bg-purple-200 group-hover:scale-110 transition-all duration-200">
                                <i class="fas fa-id-card text-purple-600"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-xs text-gray-500 mb-1.5 font-semibold uppercase tracking-wide">
                                    @if(profile()?.role === UserRole.STUDENT) {
                                        Student ID
                                    } @else if(profile()?.role === UserRole.TEACHER) {
                                        Teacher ID
                                    } @else if(profile()?.role === UserRole.PARENT) {
                                        Parent ID
                                    } @else if(profile()?.role === UserRole.ACADEMY_OWNER) {
                                        Academy Owner ID
                                    } @else {
                                        User ID
                                    }
                                </p>
                                <p class="text-sm text-gray-900 font-semibold leading-relaxed">
                                    @if(profile()?.role === UserRole.STUDENT) {
                                        {{profile()?.student?.id ?? "-"}}
                                    } @else if(profile()?.role === UserRole.TEACHER) {
                                        {{profile()?.teacher?.id ?? "-"}}
                                    } @else if(profile()?.role === UserRole.PARENT) {
                                        {{profile()?.parent?.id ?? "-"}}
                                    } @else if(profile()?.role === UserRole.ACADEMY_OWNER) {
                                        {{profile()?.academy?.id ?? "-"}}
                                    } @else {
                                        {{profile()?.id ?? "-"}}
                                    }
                                </p>
                            </div>
                        </div>
                        <div class="flex items-start gap-4 group hover:bg-orange-50/50 rounded-xl p-4 -mx-2 transition-all duration-200 cursor-pointer border border-transparent hover:border-orange-200">
                            <div class="w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:bg-orange-200 group-hover:scale-110 transition-all duration-200">
                                <i class="fas fa-calendar text-orange-600"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-xs text-gray-500 mb-1.5 font-semibold uppercase tracking-wide">Date of Birth</p>
                                <p class="text-sm text-gray-900 font-semibold leading-relaxed">
                                    @if(profile()?.details?.dateOfBirth) {
                                        {{profile()?.details?.dateOfBirth | date:'dd MMM yyyy' }}
                                    } @else {
                                        <span class="text-gray-400 italic">Not provided</span>
                                    }
                                </p>
                            </div>
                        </div>
                        <div class="flex items-start gap-4 group hover:bg-pink-50/50 rounded-xl p-4 -mx-2 transition-all duration-200 cursor-pointer border border-transparent hover:border-pink-200">
                            <div class="w-12 h-12 bg-pink-100 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:bg-pink-200 group-hover:scale-110 transition-all duration-200">
                                <i class="fas fa-venus-mars text-pink-600"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-xs text-gray-500 mb-1.5 font-semibold uppercase tracking-wide">Gender</p>
                                <p class="text-sm text-gray-900 font-semibold leading-relaxed capitalize">{{profile()?.details?.gender || "Not provided"}}</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-4 group hover:bg-indigo-50/50 rounded-xl p-4 -mx-2 transition-all duration-200 cursor-pointer border border-transparent hover:border-indigo-200">
                            <div class="w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:bg-indigo-200 group-hover:scale-110 transition-all duration-200">
                                <i class="fas fa-flag text-indigo-600"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-xs text-gray-500 mb-1.5 font-semibold uppercase tracking-wide">Nationality</p>
                                <p class="text-sm text-gray-900 font-semibold leading-relaxed">{{profile()?.details?.nationality?.name || "Not provided"}}</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-4 group hover:bg-teal-50/50 rounded-xl p-4 -mx-2 transition-all duration-200 cursor-pointer border border-transparent hover:border-teal-200">
                            <div class="w-12 h-12 bg-teal-100 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:bg-teal-200 group-hover:scale-110 transition-all duration-200">
                                <i class="fas fa-calendar-check text-teal-600"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-xs text-gray-500 mb-1.5 font-semibold uppercase tracking-wide">Date of Joining</p>
                                <p class="text-sm text-gray-900 font-semibold leading-relaxed">{{profile()?.createdAt | date:'dd MMM yyyy' }}</p>
                            </div>
                        </div>
                        @if(profile()?.role === UserRole.STUDENT) {
                            <div class="flex items-start gap-4 group hover:bg-cyan-50/50 rounded-xl p-4 -mx-2 transition-all duration-200 cursor-pointer border border-transparent hover:border-cyan-200">
                                <div class="w-12 h-12 bg-cyan-100 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:bg-cyan-200 group-hover:scale-110 transition-all duration-200">
                                    <i class="fas fa-graduation-cap text-cyan-600"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-xs text-gray-500 mb-1.5 font-semibold uppercase tracking-wide">Grade/Class</p>
                                    <p class="text-sm text-gray-900 font-semibold leading-relaxed">
                                        {{profile()?.student?.grade ?? "-"}} - {{profile()?.student?.section ?? "-"}}
                                    </p>
                                </div>
                            </div>
                        }
                        @if(profile()?.details?.address || profile()?.details?.city || profile()?.details?.state || profile()?.details?.zipCode || profile()?.details?.country) {
                            <div class="flex items-start gap-4 group hover:bg-red-50/50 rounded-xl p-4 -mx-2 transition-all duration-200 cursor-pointer border border-transparent hover:border-red-200">
                                <div class="w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:bg-red-200 group-hover:scale-110 transition-all duration-200">
                                    <i class="fas fa-map-marker-alt text-red-600"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-xs text-gray-500 mb-1.5 font-semibold uppercase tracking-wide">Address</p>
                                    <p class="text-sm text-gray-900 font-semibold leading-relaxed">
                                        {{profile()?.details?.address || ""}}
                                        @if(profile()?.details?.city || profile()?.details?.state || profile()?.details?.zipCode) {
                                            <span class="text-gray-600">
                                                , {{profile()?.details?.city || ""}} 
                                                {{profile()?.details?.state || ""}} 
                                                {{profile()?.details?.zipCode || ""}}
                                            </span>
                                        }
                                        @if(profile()?.details?.country) {
                                            <span class="text-gray-600">, {{profile()?.details?.country}}</span>
                                        }
                                    </p>
                                </div>
                            </div>
                        }
                    </div>
                </div>

                <!-- About Section -->
                <div class="bg-white rounded-2xl shadow-sm overflow-hidden border border-gray-200 w-full hover:shadow-md transition-shadow duration-300">
                    <div class="bg-gradient-to-r from-amber-50 to-orange-50 px-6 py-5 border-b border-gray-200">
                        <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                            <div class="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-user-circle text-amber-600"></i>
                            </div>
                            <span>About</span>
                        </h3>
                    </div>
                    <div class="p-6">
                        <p class="text-sm text-gray-700 leading-relaxed">
                            @if(profile()?.role === UserRole.TEACHER) {
                                {{profile()?.teacher?.introduction || profile()?.teacher?.tagline || "No introduction provided."}}
                            }
                            @else if(profile()?.role === UserRole.STUDENT) {
                                {{profile()?.student?.tagline || "No introduction provided."}}
                            }
                            @else {
                                {{profile()?.details?.bio || "No introduction provided."}}
                            }
                        </p>
                    </div>
                </div>

                <!-- Teacher Specific Info -->
                @if(profile()?.role === UserRole.TEACHER && profile()?.teacher) {
                    <!-- Experience & Specialization -->
                    <div class="bg-white rounded-2xl shadow-sm overflow-hidden border border-gray-200 w-full hover:shadow-md transition-shadow duration-300">
                        <div class="bg-gradient-to-r from-green-50 to-emerald-50 px-6 py-5 border-b border-gray-200">
                            <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-briefcase text-green-600"></i>
                                </div>
                                <span>Professional Info</span>
                            </h3>
                        </div>
                        <div class="p-6 space-y-5">
                            @if(profile()?.teacher?.yearsOfExperience) {
                                <div class="flex items-center gap-4 p-4 bg-green-50 rounded-xl border-2 border-green-100 hover:border-green-300 transition-colors">
                                    <div class="w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center flex-shrink-0">
                                        <i class="fas fa-calendar-check text-green-600 text-lg"></i>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 mb-1 font-semibold uppercase tracking-wide">Years of Experience</p>
                                        <p class="text-base font-bold text-gray-900">{{profile()?.teacher?.yearsOfExperience}} years</p>
                                    </div>
                                </div>
                            }
                            @if(profile()?.teacher?.preferredSubject) {
                                <div class="flex items-center gap-4 p-4 bg-blue-50 rounded-xl border-2 border-blue-100 hover:border-blue-300 transition-colors">
                                    <div class="w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0">
                                        <i class="fas fa-book text-blue-600 text-lg"></i>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 mb-1 font-semibold uppercase tracking-wide">Preferred Subject</p>
                                        <p class="text-base font-bold text-gray-900">{{profile()?.teacher?.preferredSubject}}</p>
                                    </div>
                                </div>
                            }
                            @if(profile()?.teacher?.specialization) {
                                <div class="flex items-center gap-4 p-4 bg-purple-50 rounded-xl border-2 border-purple-100 hover:border-purple-300 transition-colors">
                                    <div class="w-14 h-14 bg-purple-100 rounded-xl flex items-center justify-center flex-shrink-0">
                                        <i class="fas fa-star text-purple-600 text-lg"></i>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 mb-1 font-semibold uppercase tracking-wide">Specialization</p>
                                        <p class="text-base font-bold text-gray-900">{{profile()?.teacher?.specialization}}</p>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>

                    <!-- Rates -->
                    @if(profile()?.teacher?.hourlyRate || profile()?.teacher?.monthlyRate) {
                        <div class="bg-white rounded-2xl shadow-sm overflow-hidden border border-gray-200 w-full hover:shadow-md transition-shadow duration-300">
                            <div class="bg-gradient-to-r from-yellow-50 to-amber-50 px-6 py-5 border-b border-gray-200">
                                <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                    <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-dollar-sign text-yellow-600"></i>
                                    </div>
                                    <span>Rates</span>
                                </h3>
                            </div>
                            <div class="p-6">
                                <div class="grid grid-cols-2 gap-4">
                                    @if(profile()?.teacher?.hourlyRate) {
                                        <div class="text-center p-5 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border-2 border-blue-200 hover:border-blue-400 hover:shadow-lg transition-all duration-200">
                                            <div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-3">
                                                <i class="fas fa-clock text-white"></i>
                                            </div>
                                            <p class="text-xs text-gray-500 mb-2 font-semibold uppercase tracking-wide">Hourly Rate</p>
                                            <p class="text-3xl font-bold text-blue-600">{{(profile()?.teacher?.hourlyRate || 0) | taleemiyatCurrency}}</p>
                                        </div>
                                    }
                                    @if(profile()?.teacher?.monthlyRate) {
                                        <div class="text-center p-5 bg-gradient-to-br from-green-50 to-green-100 rounded-xl border-2 border-green-200 hover:border-green-400 hover:shadow-lg transition-all duration-200">
                                            <div class="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-3">
                                                <i class="fas fa-calendar-alt text-white"></i>
                                            </div>
                                            <p class="text-xs text-gray-500 mb-2 font-semibold uppercase tracking-wide">Monthly Rate</p>
                                            <p class="text-3xl font-bold text-green-600">{{(profile()?.teacher?.monthlyRate || 0) | taleemiyatCurrency}}</p>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    }
                }
            </div>

            <!-- Right Column: Additional Info -->
            <div class="lg:col-span-2 space-y-6 w-full">
                <!-- Introduction Video (Teacher Only) -->
                @if(profile()?.role === UserRole.TEACHER && (profile()?.teacher?.introductionVideoUrl || profile()?.teacher?.introductionVideoThumbnailUrl)) {
                    <div class="bg-white rounded-2xl shadow-sm overflow-hidden border border-gray-200 w-full hover:shadow-md transition-shadow duration-300">
                        <div class="bg-gradient-to-r from-red-50 to-pink-50 px-6 py-5 border-b border-gray-200">
                            <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-video text-red-600"></i>
                                </div>
                                <span>Introduction Video</span>
                            </h3>
                        </div>
                        <div class="p-6">
                            @if(profile()?.teacher?.introductionVideoThumbnailUrl) {
                                <div class="relative rounded-xl overflow-hidden border-2 border-gray-200 mb-4 group cursor-pointer hover:border-red-300 transition-all duration-300">
                                    <img [src]="assetsUrl + profile()?.teacher?.introductionVideoThumbnailUrl" 
                                         alt="Video Thumbnail"
                                         class="w-full h-72 object-cover group-hover:scale-105 transition-transform duration-500">
                                    @if(profile()?.teacher?.introductionVideoUrl) {
                                        <div class="absolute inset-0 flex items-center justify-center bg-black/40 group-hover:bg-black/50 transition-all duration-300">
                                            <div class="w-20 h-20 bg-red-500 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-2xl">
                                                <i class="fas fa-play text-white text-3xl ml-1"></i>
                                            </div>
                                        </div>
                                    }
                                </div>
                            }
                            @if(profile()?.teacher?.introductionVideoTitle) {
                                <h4 class="text-2xl font-bold text-gray-900 mb-3">{{profile()?.teacher?.introductionVideoTitle}}</h4>
                            }
                            @if(profile()?.teacher?.introductionVideoDescription) {
                                <p class="text-sm text-gray-600 leading-relaxed">{{profile()?.teacher?.introductionVideoDescription}}</p>
                            }
                        </div>
                    </div>
                }

                <!-- Student Specific Sections -->
                @if(profile()?.role === UserRole.STUDENT) {
                    <!-- Academic Performance -->
                    <div class="bg-white rounded-2xl shadow-sm overflow-hidden border border-gray-200 w-full hover:shadow-md transition-shadow duration-300">
                        <div class="bg-gradient-to-r from-green-50 to-emerald-50 px-6 py-5 border-b border-gray-200">
                            <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-chart-line text-green-600"></i>
                                </div>
                                <span>Academic Performance</span>
                            </h3>
                        </div>
                        <div class="p-6">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-5">
                                <div class="text-center p-6 bg-gradient-to-br from-green-50 to-emerald-100 rounded-2xl border-2 border-green-200 hover:border-green-400 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
                                    <div class="w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
                                        <i class="fas fa-star text-white text-3xl"></i>
                                    </div>
                                    <p class="text-xs text-gray-500 mb-2 font-semibold uppercase tracking-wide">Average Grade</p>
                                    <p class="text-4xl font-bold text-green-600">A-</p>
                                </div>
                                <div class="text-center p-6 bg-gradient-to-br from-blue-50 to-cyan-100 rounded-2xl border-2 border-blue-200 hover:border-blue-400 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
                                    <div class="w-20 h-20 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
                                        <i class="fas fa-calendar-check text-white text-3xl"></i>
                                    </div>
                                    <p class="text-xs text-gray-500 mb-2 font-semibold uppercase tracking-wide">Attendance</p>
                                    <p class="text-4xl font-bold text-blue-600">96%</p>
                                </div>
                                <div class="text-center p-6 bg-gradient-to-br from-purple-50 to-pink-100 rounded-2xl border-2 border-purple-200 hover:border-purple-400 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
                                    <div class="w-20 h-20 bg-purple-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
                                        <i class="fas fa-trophy text-white text-3xl"></i>
                                    </div>
                                    <p class="text-xs text-gray-500 mb-2 font-semibold uppercase tracking-wide">Rank</p>
                                    <p class="text-4xl font-bold text-purple-600">#12</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Enrolled Courses -->
                    <div class="bg-white rounded-2xl shadow-sm overflow-hidden border border-gray-200 w-full hover:shadow-md transition-shadow duration-300">
                        <div class="bg-gradient-to-r from-indigo-50 to-purple-50 px-6 py-5 border-b border-gray-200">
                            <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                <div class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-book text-indigo-600"></i>
                                </div>
                                <span>Enrolled Courses</span>
                            </h3>
                        </div>
                        <div class="p-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="p-5 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border-2 border-blue-200 hover:border-blue-400 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                                    <div class="flex items-center justify-between mb-3">
                                        <p class="font-bold text-gray-900 text-base">Mathematics</p>
                                        <span class="px-3 py-1.5 bg-green-500 text-white text-xs font-bold rounded-full shadow-md">A</span>
                                    </div>
                                    <p class="text-sm text-gray-600 flex items-center gap-2">
                                        <i class="fas fa-user text-gray-400"></i>
                                        Mr. John Smith
                                    </p>
                                </div>
                                <div class="p-5 bg-gradient-to-br from-green-50 to-green-100 rounded-xl border-2 border-green-200 hover:border-green-400 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                                    <div class="flex items-center justify-between mb-3">
                                        <p class="font-bold text-gray-900 text-base">Science</p>
                                        <span class="px-3 py-1.5 bg-blue-500 text-white text-xs font-bold rounded-full shadow-md">A-</span>
                                    </div>
                                    <p class="text-sm text-gray-600 flex items-center gap-2">
                                        <i class="fas fa-user text-gray-400"></i>
                                        Ms. Emily Davis
                                    </p>
                                </div>
                                <div class="p-5 bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl border-2 border-orange-200 hover:border-orange-400 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                                    <div class="flex items-center justify-between mb-3">
                                        <p class="font-bold text-gray-900 text-base">English</p>
                                        <span class="px-3 py-1.5 bg-yellow-500 text-white text-xs font-bold rounded-full shadow-md">B+</span>
                                    </div>
                                    <p class="text-sm text-gray-600 flex items-center gap-2">
                                        <i class="fas fa-user text-gray-400"></i>
                                        Mrs. Lisa Anderson
                                    </p>
                                </div>
                                <div class="p-5 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border-2 border-purple-200 hover:border-purple-400 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                                    <div class="flex items-center justify-between mb-3">
                                        <p class="font-bold text-gray-900 text-base">History</p>
                                        <span class="px-3 py-1.5 bg-green-500 text-white text-xs font-bold rounded-full shadow-md">A</span>
                                    </div>
                                    <p class="text-sm text-gray-600 flex items-center gap-2">
                                        <i class="fas fa-user text-gray-400"></i>
                                        Mr. Robert Brown
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Grades -->
                    <div class="bg-white rounded-2xl shadow-sm overflow-hidden border border-gray-200 w-full hover:shadow-md transition-shadow duration-300">
                        <div class="bg-gradient-to-r from-amber-50 to-orange-50 px-6 py-5 border-b border-gray-200">
                            <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                <div class="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-star text-amber-600"></i>
                                </div>
                                <span>Recent Grades</span>
                            </h3>
                        </div>
                        <div class="p-6">
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-5 bg-gradient-to-r from-green-50 to-emerald-100 rounded-xl border-l-4 border-green-500 hover:shadow-lg hover:border-green-600 transition-all duration-300 transform hover:-translate-x-1">
                                    <div class="flex-1">
                                        <p class="font-bold text-gray-900 mb-1.5 text-base">Mathematics Quiz #5</p>
                                        <p class="text-xs text-gray-500 flex items-center gap-2">
                                            <i class="fas fa-calendar text-gray-400"></i>
                                            October 15, 2024
                                        </p>
                                    </div>
                                    <div class="text-right ml-4">
                                        <p class="text-3xl font-bold text-green-600">95%</p>
                                        <p class="text-xs text-gray-500 font-semibold">Grade A</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-5 bg-gradient-to-r from-blue-50 to-cyan-100 rounded-xl border-l-4 border-blue-500 hover:shadow-lg hover:border-blue-600 transition-all duration-300 transform hover:-translate-x-1">
                                    <div class="flex-1">
                                        <p class="font-bold text-gray-900 mb-1.5 text-base">Science Lab Report</p>
                                        <p class="text-xs text-gray-500 flex items-center gap-2">
                                            <i class="fas fa-calendar text-gray-400"></i>
                                            October 12, 2024
                                        </p>
                                    </div>
                                    <div class="text-right ml-4">
                                        <p class="text-3xl font-bold text-blue-600">88%</p>
                                        <p class="text-xs text-gray-500 font-semibold">Grade A-</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-5 bg-gradient-to-r from-yellow-50 to-amber-100 rounded-xl border-l-4 border-yellow-500 hover:shadow-lg hover:border-yellow-600 transition-all duration-300 transform hover:-translate-x-1">
                                    <div class="flex-1">
                                        <p class="font-bold text-gray-900 mb-1.5 text-base">English Essay</p>
                                        <p class="text-xs text-gray-500 flex items-center gap-2">
                                            <i class="fas fa-calendar text-gray-400"></i>
                                            October 10, 2024
                                        </p>
                                    </div>
                                    <div class="text-right ml-4">
                                        <p class="text-3xl font-bold text-yellow-600">85%</p>
                                        <p class="text-xs text-gray-500 font-semibold">Grade B+</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }

                <!-- Teacher Specific Sections -->
                @if(profile()?.role === UserRole.TEACHER) {
                    <!-- Subjects -->
                    @if(profile()?.teacher?.teacherSubjects && (profile()?.teacher?.teacherSubjects?.length ?? 0) > 0) {
                        <div class="bg-white rounded-2xl shadow-sm overflow-hidden border border-gray-200 w-full hover:shadow-md transition-shadow duration-300">
                            <div class="bg-gradient-to-r from-emerald-50 to-teal-50 px-6 py-5 border-b border-gray-200">
                                <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                    <div class="w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-book text-emerald-600"></i>
                                    </div>
                                    <span>Subjects</span>
                                    <span class="text-sm font-normal text-gray-600 bg-white px-3 py-1.5 rounded-full border border-gray-200 shadow-sm">
                                        {{profile()?.teacher?.teacherSubjects?.length ?? 0}}
                                    </span>
                                </h3>
                            </div>
                            <div class="p-6">
                                <div class="flex flex-wrap gap-3">
                                    @for (teacherSubject of (profile()?.teacher?.teacherSubjects || []); track teacherSubject.id) {
                                        <span class="inline-flex items-center px-5 py-2.5 rounded-full text-sm font-semibold bg-gradient-to-r from-emerald-100 to-teal-100 text-emerald-700 border-2 border-emerald-200 hover:from-emerald-200 hover:to-teal-200 hover:border-emerald-400 hover:scale-105 transition-all duration-200 shadow-sm">
                                            <i class="fas fa-book-open mr-2 text-xs"></i>
                                            {{ teacherSubject.subject?.name }}
                                        </span>
                                    }
                                </div>
                            </div>
                        </div>
                    }

                    <!-- Subject Rates -->
                    @if(profile()?.teacher?.teacherSubjects && (profile()?.teacher?.teacherSubjects?.length ?? 0) > 0) {
                        <div class="bg-white rounded-2xl shadow-sm overflow-hidden border border-gray-200 w-full hover:shadow-md transition-shadow duration-300">
                            <div class="bg-gradient-to-r from-yellow-50 to-amber-50 px-6 py-5 border-b border-gray-200">
                                <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                    <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-dollar-sign text-yellow-600"></i>
                                    </div>
                                    <span>Subject-Specific Rates</span>
                                </h3>
                            </div>
                            <div class="p-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    @for (teacherSubject of (profile()?.teacher?.teacherSubjects || []); track teacherSubject.id) {
                                        @if(teacherSubject.hourlyRate || teacherSubject.monthlyRate) {
                                            <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-5 border-2 border-gray-200 hover:border-indigo-400 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                                                <h4 class="font-bold text-gray-900 mb-4 flex items-center gap-2 text-base">
                                                    <i class="fas fa-bookmark text-indigo-600"></i>
                                                    {{ teacherSubject.subject?.name }}
                                                </h4>
                                                <div class="grid grid-cols-2 gap-3">
                                                    @if(teacherSubject.hourlyRate) {
                                                        <div class="text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg border-2 border-blue-200 hover:border-blue-400 transition-colors">
                                                            <p class="text-xs text-gray-500 mb-1 font-semibold uppercase tracking-wide">Hourly</p>
                                                            <p class="text-xl font-bold text-blue-600">{{teacherSubject.hourlyRate | taleemiyatCurrency}}</p>
                                                        </div>
                                                    }
                                                    @if(teacherSubject.monthlyRate) {
                                                        <div class="text-center p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-lg border-2 border-green-200 hover:border-green-400 transition-colors">
                                                            <p class="text-xs text-gray-500 mb-1 font-semibold uppercase tracking-wide">Monthly</p>
                                                            <p class="text-xl font-bold text-green-600">{{teacherSubject.monthlyRate | taleemiyatCurrency}}</p>
                                                        </div>
                                                    }
                                                </div>
                                            </div>
                                        }
                                    }
                                </div>
                            </div>
                        </div>
                    }

                    <!-- Education -->
                    @if(profile()?.educations && (profile()?.educations?.length ?? 0) > 0) {
                        <div class="bg-white rounded-2xl shadow-sm overflow-hidden border border-gray-200 w-full hover:shadow-md transition-shadow duration-300">
                            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-5 border-b border-gray-200">
                                <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-graduation-cap text-blue-600"></i>
                                    </div>
                                    <span>Education</span>
                                    <span class="text-sm font-normal text-gray-600 bg-white px-3 py-1.5 rounded-full border border-gray-200 shadow-sm">
                                        {{profile()?.educations?.length ?? 0}}
                                    </span>
                                </h3>
                            </div>
                            <div class="p-6 space-y-4">
                                @for (education of (profile()?.educations || []); track education.id) {
                                    <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-5 border-2 border-blue-200 hover:border-blue-400 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                                        <h4 class="text-xl font-bold text-gray-900 mb-2">{{ education.degreeName }}</h4>
                                        <p class="text-gray-700 mb-3 flex items-center gap-2 font-medium">
                                            <i class="fas fa-university text-blue-600"></i>
                                            {{ education.instituteName }}
                                        </p>
                                        <p class="text-sm text-gray-600 flex items-center gap-2">
                                            <i class="fas fa-calendar text-gray-400"></i>
                                            {{ education.startedYear }} - {{ education.isStillStudying ? 'Present' : (education.endedYear || 'N/A') }}
                                            @if (education.isStillStudying) {
                                                <span class="ml-2 px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold border border-green-200">
                                                    Ongoing
                                                </span>
                                            }
                                        </p>
                                        @if (education.remarks) {
                                            <p class="text-sm text-gray-600 mt-3 pt-3 border-t border-blue-200">{{ education.remarks }}</p>
                                        }
                                    </div>
                                }
                            </div>
                        </div>
                    }

                    <!-- Availability Schedule -->
                    @if(profile()?.teacher?.availabilities && (profile()?.teacher?.availabilities?.length ?? 0) > 0) {
                        <div class="bg-white rounded-2xl shadow-sm overflow-hidden border border-gray-200 w-full hover:shadow-md transition-shadow duration-300">
                            <div class="bg-gradient-to-r from-purple-50 to-pink-50 px-6 py-5 border-b border-gray-200">
                                <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                    <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-calendar-alt text-purple-600"></i>
                                    </div>
                                    <span>Availability Schedule</span>
                                    <span class="text-sm font-normal text-gray-600 bg-white px-3 py-1.5 rounded-full border border-gray-200 shadow-sm">
                                        {{profile()?.teacher?.availabilities?.length ?? 0}} slot{{(profile()?.teacher?.availabilities?.length ?? 0) !== 1 ? 's' : ''}}
                                    </span>
                                </h3>
                            </div>
                            <div class="p-6">
                                <div class="space-y-4">
                                    @for (dayGroup of getGroupedAvailabilitySlots(); track dayGroup.day) {
                                        <div class="border-2 border-purple-200 rounded-xl overflow-hidden hover:border-purple-400 transition-all duration-300">
                                            <div class="bg-gradient-to-r from-purple-50 to-pink-50 px-5 py-4 border-b border-purple-200">
                                                <div class="flex items-center gap-3">
                                                    <i class="fas fa-calendar-day text-purple-600 text-lg"></i>
                                                    <span class="font-bold text-gray-900 capitalize text-base">{{dayGroup.day}}</span>
                                                    <span class="text-xs text-gray-600 bg-white px-3 py-1 rounded-full border border-purple-200 shadow-sm font-semibold">
                                                        {{dayGroup.slots.length}} slot{{dayGroup.slots.length !== 1 ? 's' : ''}}
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="divide-y divide-gray-100">
                                                @for (slot of dayGroup.slots; track slot.dayOfWeek + slot.startTime + slot.endTime) {
                                                    <div class="px-5 py-4 hover:bg-purple-50/50 transition-colors duration-200">
                                                        <div class="flex items-center gap-3 text-sm text-gray-700">
                                                            <i class="fas fa-clock text-purple-600"></i>
                                                            <span class="font-semibold text-base">{{formatTime(slot.startTime)}} - {{formatTime(slot.endTime)}}</span>
                                                            <span class="text-gray-400"></span>
                                                            <span class="text-gray-600 font-medium">{{calculateDuration(slot.startTime, slot.endTime)}}</span>
                                                        </div>
                                                    </div>
                                                }
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    }
                }
            </div>
        </div>
    </div>
</div>
} @else if(isLoading()) {
<!-- Skeleton Loader -->
<div class="w-full min-h-screen bg-gray-50 flex items-center justify-center">
    <div class="text-center">
        <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-primary mx-auto mb-4"></div>
        <p class="text-gray-600 font-medium">Loading profile...</p>
    </div>
</div>
} @else {
<div class="w-full min-h-screen bg-gray-50 flex items-center justify-center">
    <div class="text-center">
        <i class="fas fa-user-slash text-6xl text-gray-300 mb-4"></i>
        <p class="text-xl font-semibold text-gray-700 mb-2">No profile found</p>
        <p class="text-gray-500">Please complete your profile setup</p>
    </div>
</div>
}
