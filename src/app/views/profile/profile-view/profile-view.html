@if(profile() && !isLoading()) {
<div class="w-full min-h-screen bg-gray-50 pb-8">
    <!-- Profile Header with Cover -->
    <div class="w-full bg-gradient-to-r from-primary/40 via-primary/20 to-primary/40 relative overflow-hidden mb-8">
        <div class="absolute inset-0 bg-black/10"></div>
        <div class="relative w-full mx-auto px-4 sm:px-6 lg:px-8 pt-8 pb-16">
            <div class="flex flex-col md:flex-row items-center md:items-end gap-6">
                <!-- Profile Picture -->
                <div class="relative flex-shrink-0">
                    <div class="relative">
                        @if(profile()?.details?.profileImage) {
                            <img [src]="assetsUrl + profile()?.details?.profileImage" alt="Profile Image"
                                class="w-32 h-32 md:w-40 md:h-40 rounded-full object-cover border-4 border-white shadow-2xl">
                        } @else {
                            <div class="w-32 h-32 md:w-40 md:h-40 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-white text-4xl md:text-5xl font-bold border-4 border-white shadow-2xl">
                                {{profile()!.firstName!.charAt(0) + profile()!.lastName!.charAt(0)}}
                            </div>
                        }
                        <label id="uploadPhotoBtn"
                            class="absolute bottom-2 right-2 w-10 h-10 bg-white rounded-full flex items-center justify-center text-primary hover:bg-gray-100 transition shadow-lg cursor-pointer">
                            <i class="fas fa-camera text-sm"></i>
                            <input type="file" id="profilePhoto" accept="image/*" class="hidden"
                                (change)="onProfilePhotoChange($event)">
                        </label>
                    </div>
                </div>

                <!-- Profile Info -->
                <div class="flex-1 w-full text-center md:text-left text-white">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4">
                        <div class="w-full">
                            <h1 class="text-3xl md:text-4xl font-bold mb-2">
                                {{profile()?.firstName ?? ""}} {{profile()?.lastName ?? ""}}
                            </h1>
                            <div class="flex items-center justify-center md:justify-start gap-3 flex-wrap">
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white/20 backdrop-blur-sm">
                                    <i class="fas fa-user-tag mr-2"></i>
                                    {{profile()?.role ?? ""}}
                                </span>
                                @if(profile()?.teacher?.isVerified) {
                                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-500/20 backdrop-blur-sm border border-green-300/50">
                                        <i class="fas fa-check-circle mr-2"></i>
                                        Verified
                                    </span>
                                }
                            </div>
                        </div>
                        <a [routerLink]="['/profile/edit',1]"
                            class="inline-flex items-center justify-center px-6 py-3 bg-white text-primary rounded-lg font-semibold hover:bg-gray-100 transition shadow-lg hover:shadow-xl flex-shrink-0">
                            <i class="fas fa-edit mr-2"></i>
                            <span>Edit Profile</span>
                        </a>
                    </div>
                    
                    @if(profile()?.role === UserRole.TEACHER && profile()?.teacher?.tagline) {
                        <p class="text-lg text-white/90 italic mb-2">{{profile()?.teacher?.tagline}}</p>
                    }
                    @else if(profile()?.role === UserRole.STUDENT && profile()?.student?.tagline) {
                        <p class="text-lg text-white/90 italic mb-2">{{profile()?.student?.tagline}}</p>
                    }
                    @else if(profile()?.details?.bio) {
                        <p class="text-lg text-white/90 italic mb-2">{{profile()?.details?.bio}}</p>
                    }
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="w-full mx-auto">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 w-full">
            <!-- Left Column: Profile Details -->
            <div class="lg:col-span-1 space-y-6 w-full">
                <!-- Contact Information Card -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 w-full">
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                            <i class="fas fa-address-card text-primary"></i>
                            <span>Contact Information</span>
                        </h3>
                    </div>
                    <div class="p-6 space-y-4">
                        <div class="flex items-start gap-4 group hover:bg-gray-50 rounded-lg p-3 -mx-3 transition">
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-blue-200 transition">
                                <i class="fas fa-envelope text-primary"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-xs text-gray-500 mb-1 font-medium">Email</p>
                                <p class="text-sm text-gray-900 break-all font-semibold">{{profile()?.email ?? "-"}}</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-4 group hover:bg-gray-50 rounded-lg p-3 -mx-3 transition">
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-green-200 transition">
                                <i class="fas fa-phone text-green-600"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-xs text-gray-500 mb-1 font-medium">Phone</p>
                                <p class="text-sm text-gray-900 font-semibold">{{profile()?.details?.phone ?? "-"}}</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-4 group hover:bg-gray-50 rounded-lg p-3 -mx-3 transition">
                            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-purple-200 transition">
                                <i class="fas fa-id-card text-purple-600"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-xs text-gray-500 mb-1 font-medium">
                                    @if(profile()?.role === UserRole.STUDENT) {
                                        Student ID
                                    } @else if(profile()?.role === UserRole.TEACHER) {
                                        Teacher ID
                                    } @else if(profile()?.role === UserRole.PARENT) {
                                        Parent ID
                                    } @else if(profile()?.role === UserRole.ACADEMY_OWNER) {
                                        Academy Owner ID
                                    } @else {
                                        User ID
                                    }
                                </p>
                                <p class="text-sm text-gray-900 font-semibold">
                                    @if(profile()?.role === UserRole.STUDENT) {
                                        {{profile()?.student?.id ?? "-"}}
                                    } @else if(profile()?.role === UserRole.TEACHER) {
                                        {{profile()?.teacher?.id ?? "-"}}
                                    } @else if(profile()?.role === UserRole.PARENT) {
                                        {{profile()?.parent?.id ?? "-"}}
                                    } @else if(profile()?.role === UserRole.ACADEMY_OWNER) {
                                        {{profile()?.academy?.id ?? "-"}}
                                    } @else {
                                        {{profile()?.id ?? "-"}}
                                    }
                                </p>
                            </div>
                        </div>
                        <div class="flex items-start gap-4 group hover:bg-gray-50 rounded-lg p-3 -mx-3 transition">
                            <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-orange-200 transition">
                                <i class="fas fa-calendar text-orange-600"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-xs text-gray-500 mb-1 font-medium">Date of Birth</p>
                                <p class="text-sm text-gray-900 font-semibold">
                                    @if(profile()?.details?.dateOfBirth) {
                                        {{profile()?.details?.dateOfBirth | date:'dd MMM yyyy' }}
                                    } @else {
                                        Not provided
                                    }
                                </p>
                            </div>
                        </div>
                        <div class="flex items-start gap-4 group hover:bg-gray-50 rounded-lg p-3 -mx-3 transition">
                            <div class="w-12 h-12 bg-pink-100 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-pink-200 transition">
                                <i class="fas fa-venus-mars text-pink-600"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-xs text-gray-500 mb-1 font-medium">Gender</p>
                                <p class="text-sm text-gray-900 font-semibold">{{profile()?.details?.gender || "Not provided"}}</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-4 group hover:bg-gray-50 rounded-lg p-3 -mx-3 transition">
                            <div class="w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-indigo-200 transition">
                                <i class="fas fa-flag text-indigo-600"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-xs text-gray-500 mb-1 font-medium">Nationality</p>
                                <p class="text-sm text-gray-900 font-semibold">{{profile()?.details?.nationalityId || "Not provided"}}</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-4 group hover:bg-gray-50 rounded-lg p-3 -mx-3 transition">
                            <div class="w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-teal-200 transition">
                                <i class="fas fa-calendar-check text-teal-600"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-xs text-gray-500 mb-1 font-medium">Date of Joining</p>
                                <p class="text-sm text-gray-900 font-semibold">{{profile()?.createdAt | date:'dd MMM yyyy' }}</p>
                            </div>
                        </div>
                        @if(profile()?.role === UserRole.STUDENT) {
                            <div class="flex items-start gap-4 group hover:bg-gray-50 rounded-lg p-3 -mx-3 transition">
                                <div class="w-12 h-12 bg-cyan-100 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-cyan-200 transition">
                                    <i class="fas fa-graduation-cap text-cyan-600"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-xs text-gray-500 mb-1 font-medium">Grade/Class</p>
                                    <p class="text-sm text-gray-900 font-semibold">
                                        {{profile()?.student?.grade ?? "-"}} - {{profile()?.student?.section ?? "-"}}
                                    </p>
                                </div>
                            </div>
                        }
                        @if(profile()?.details?.address || profile()?.details?.city || profile()?.details?.state || profile()?.details?.zipCode || profile()?.details?.country) {
                            <div class="flex items-start gap-4 group hover:bg-gray-50 rounded-lg p-3 -mx-3 transition">
                                <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-red-200 transition">
                                    <i class="fas fa-map-marker-alt text-red-600"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-xs text-gray-500 mb-1 font-medium">Address</p>
                                    <p class="text-sm text-gray-900 font-semibold">
                                        {{profile()?.details?.address || ""}}
                                        @if(profile()?.details?.city || profile()?.details?.state || profile()?.details?.zipCode) {
                                            <span class="text-gray-600">
                                                , {{profile()?.details?.city || ""}} 
                                                {{profile()?.details?.state || ""}} 
                                                {{profile()?.details?.zipCode || ""}}
                                            </span>
                                        }
                                        @if(profile()?.details?.country) {
                                            <span class="text-gray-600">, {{profile()?.details?.country}}</span>
                                        }
                                    </p>
                                </div>
                            </div>
                        }
                    </div>
                </div>

                <!-- About Section -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 w-full">
                    <div class="bg-gradient-to-r from-amber-50 to-orange-50 px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                            <i class="fas fa-user-circle text-primary"></i>
                            <span>About</span>
                        </h3>
                    </div>
                    <div class="p-6">
                        <p class="text-sm text-gray-700 leading-relaxed">
                            @if(profile()?.role === UserRole.TEACHER) {
                                {{profile()?.teacher?.introduction || profile()?.teacher?.tagline || "No introduction provided."}}
                            }
                            @else if(profile()?.role === UserRole.STUDENT) {
                                {{profile()?.student?.tagline || "No introduction provided."}}
                            }
                            @else {
                                {{profile()?.details?.bio || "No introduction provided."}}
                            }
                        </p>
                    </div>
                </div>

                <!-- Teacher Specific Info -->
                @if(profile()?.role === UserRole.TEACHER && profile()?.teacher) {
                    <!-- Experience & Specialization -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 w-full">
                        <div class="bg-gradient-to-r from-green-50 to-emerald-50 px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                <i class="fas fa-briefcase text-primary"></i>
                                <span>Professional Info</span>
                            </h3>
                        </div>
                        <div class="p-6 space-y-4">
                            @if(profile()?.teacher?.yearsOfExperience) {
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-calendar-check text-green-600"></i>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500">Years of Experience</p>
                                        <p class="text-sm font-semibold text-gray-900">{{profile()?.teacher?.yearsOfExperience}} years</p>
                                    </div>
                                </div>
                            }
                            @if(profile()?.teacher?.preferredSubject) {
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-book text-blue-600"></i>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500">Preferred Subject</p>
                                        <p class="text-sm font-semibold text-gray-900">{{profile()?.teacher?.preferredSubject}}</p>
                                    </div>
                                </div>
                            }
                            @if(profile()?.teacher?.specialization) {
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-star text-purple-600"></i>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500">Specialization</p>
                                        <p class="text-sm font-semibold text-gray-900">{{profile()?.teacher?.specialization}}</p>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>

                    <!-- Rates -->
                    @if(profile()?.teacher?.hourlyRate || profile()?.teacher?.monthlyRate) {
                        <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 w-full">
                            <div class="bg-gradient-to-r from-yellow-50 to-amber-50 px-6 py-4 border-b border-gray-200">
                                <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                    <i class="fas fa-dollar-sign text-primary"></i>
                                    <span>Rates</span>
                                </h3>
                            </div>
                            <div class="p-6">
                                <div class="grid grid-cols-2 gap-4">
                                    @if(profile()?.teacher?.hourlyRate) {
                                        <div class="text-center p-4 bg-blue-50 rounded-lg border border-blue-200">
                                            <p class="text-xs text-gray-500 mb-1">Hourly Rate</p>
                                            <p class="text-2xl font-bold text-blue-600">${{profile()?.teacher?.hourlyRate}}</p>
                                        </div>
                                    }
                                    @if(profile()?.teacher?.monthlyRate) {
                                        <div class="text-center p-4 bg-green-50 rounded-lg border border-green-200">
                                            <p class="text-xs text-gray-500 mb-1">Monthly Rate</p>
                                            <p class="text-2xl font-bold text-green-600">${{profile()?.teacher?.monthlyRate}}</p>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    }
                }
            </div>

            <!-- Right Column: Additional Info -->
            <div class="lg:col-span-2 space-y-6 w-full">
                <!-- Introduction Video (Teacher Only) -->
                @if(profile()?.role === UserRole.TEACHER && (profile()?.teacher?.introductionVideoUrl || profile()?.teacher?.introductionVideoThumbnailUrl)) {
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 w-full">
                        <div class="bg-gradient-to-r from-red-50 to-pink-50 px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                <i class="fas fa-video text-primary"></i>
                                <span>Introduction Video</span>
                            </h3>
                        </div>
                        <div class="p-6">
                            @if(profile()?.teacher?.introductionVideoThumbnailUrl) {
                                <div class="relative rounded-lg overflow-hidden border border-gray-200 mb-4">
                                    <img [src]="assetsUrl + profile()?.teacher?.introductionVideoThumbnailUrl" 
                                         alt="Video Thumbnail"
                                         class="w-full h-64 object-cover">
                                    @if(profile()?.teacher?.introductionVideoUrl) {
                                        <div class="absolute inset-0 flex items-center justify-center bg-black/30 hover:bg-black/40 transition cursor-pointer">
                                            <i class="fas fa-play-circle text-white text-6xl"></i>
                                        </div>
                                    }
                                </div>
                            }
                            @if(profile()?.teacher?.introductionVideoTitle) {
                                <h4 class="text-xl font-bold text-gray-900 mb-2">{{profile()?.teacher?.introductionVideoTitle}}</h4>
                            }
                            @if(profile()?.teacher?.introductionVideoDescription) {
                                <p class="text-sm text-gray-600 leading-relaxed">{{profile()?.teacher?.introductionVideoDescription}}</p>
                            }
                        </div>
                    </div>
                }

                <!-- Academy Info -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 w-full hidden">
                    <div class="bg-gradient-to-r from-indigo-50 to-purple-50 px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                            <i class="fas fa-school text-primary"></i>
                            <span>Academy</span>
                        </h3>
                    </div>
                    <div class="p-6">
                        <div class="flex items-center gap-4">
                            <div class="w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center text-white text-2xl font-bold shadow-lg">
                                EA
                            </div>
                            <div>
                                <h4 class="text-xl font-bold text-gray-900 mb-1">Elite Academy</h4>
                                <p class="text-sm text-gray-600">Registration #: AC-2024-001</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Student Specific Sections -->
                @if(profile()?.role === UserRole.STUDENT) {
                    <!-- Academic Performance -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 w-full">
                        <div class="bg-gradient-to-r from-green-50 to-emerald-50 px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                <i class="fas fa-chart-line text-primary"></i>
                                <span>Academic Performance</span>
                            </h3>
                        </div>
                        <div class="p-6">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="text-center p-6 bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl border border-green-200">
                                    <div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-3">
                                        <i class="fas fa-star text-white text-2xl"></i>
                                    </div>
                                    <p class="text-xs text-gray-600 mb-1">Average Grade</p>
                                    <p class="text-3xl font-bold text-green-600">A-</p>
                                </div>
                                <div class="text-center p-6 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl border border-blue-200">
                                    <div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-3">
                                        <i class="fas fa-calendar-check text-white text-2xl"></i>
                                    </div>
                                    <p class="text-xs text-gray-600 mb-1">Attendance</p>
                                    <p class="text-3xl font-bold text-blue-600">96%</p>
                                </div>
                                <div class="text-center p-6 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border border-purple-200">
                                    <div class="w-16 h-16 bg-purple-500 rounded-full flex items-center justify-center mx-auto mb-3">
                                        <i class="fas fa-trophy text-white text-2xl"></i>
                                    </div>
                                    <p class="text-xs text-gray-600 mb-1">Rank</p>
                                    <p class="text-3xl font-bold text-purple-600">#12</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Enrolled Courses -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 w-full">
                        <div class="bg-gradient-to-r from-blue-50 to-cyan-50 px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                <i class="fas fa-book text-primary"></i>
                                <span>Enrolled Courses</span>
                            </h3>
                        </div>
                        <div class="p-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200 hover:shadow-md transition">
                                    <div class="flex items-center justify-between mb-2">
                                        <p class="font-bold text-gray-900">Mathematics</p>
                                        <span class="px-3 py-1 bg-green-500 text-white text-xs font-bold rounded-full">A</span>
                                    </div>
                                    <p class="text-sm text-gray-600 flex items-center gap-2">
                                        <i class="fas fa-user text-gray-400"></i>
                                        Mr. John Smith
                                    </p>
                                </div>
                                <div class="p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200 hover:shadow-md transition">
                                    <div class="flex items-center justify-between mb-2">
                                        <p class="font-bold text-gray-900">Science</p>
                                        <span class="px-3 py-1 bg-blue-500 text-white text-xs font-bold rounded-full">A-</span>
                                    </div>
                                    <p class="text-sm text-gray-600 flex items-center gap-2">
                                        <i class="fas fa-user text-gray-400"></i>
                                        Ms. Emily Davis
                                    </p>
                                </div>
                                <div class="p-4 bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl border border-orange-200 hover:shadow-md transition">
                                    <div class="flex items-center justify-between mb-2">
                                        <p class="font-bold text-gray-900">English</p>
                                        <span class="px-3 py-1 bg-yellow-500 text-white text-xs font-bold rounded-full">B+</span>
                                    </div>
                                    <p class="text-sm text-gray-600 flex items-center gap-2">
                                        <i class="fas fa-user text-gray-400"></i>
                                        Mrs. Lisa Anderson
                                    </p>
                                </div>
                                <div class="p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200 hover:shadow-md transition">
                                    <div class="flex items-center justify-between mb-2">
                                        <p class="font-bold text-gray-900">History</p>
                                        <span class="px-3 py-1 bg-green-500 text-white text-xs font-bold rounded-full">A</span>
                                    </div>
                                    <p class="text-sm text-gray-600 flex items-center gap-2">
                                        <i class="fas fa-user text-gray-400"></i>
                                        Mr. Robert Brown
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Grades -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 w-full">
                        <div class="bg-gradient-to-r from-amber-50 to-orange-50 px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                <i class="fas fa-star text-primary"></i>
                                <span>Recent Grades</span>
                            </h3>
                        </div>
                        <div class="p-6">
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border-l-4 border-green-500 hover:shadow-md transition">
                                    <div class="flex-1">
                                        <p class="font-bold text-gray-900 mb-1">Mathematics Quiz #5</p>
                                        <p class="text-xs text-gray-500 flex items-center gap-2">
                                            <i class="fas fa-calendar text-gray-400"></i>
                                            October 15, 2024
                                        </p>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-2xl font-bold text-green-600">95%</p>
                                        <p class="text-xs text-gray-500">Grade A</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl border-l-4 border-blue-500 hover:shadow-md transition">
                                    <div class="flex-1">
                                        <p class="font-bold text-gray-900 mb-1">Science Lab Report</p>
                                        <p class="text-xs text-gray-500 flex items-center gap-2">
                                            <i class="fas fa-calendar text-gray-400"></i>
                                            October 12, 2024
                                        </p>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-2xl font-bold text-blue-600">88%</p>
                                        <p class="text-xs text-gray-500">Grade A-</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-4 bg-gradient-to-r from-yellow-50 to-amber-50 rounded-xl border-l-4 border-yellow-500 hover:shadow-md transition">
                                    <div class="flex-1">
                                        <p class="font-bold text-gray-900 mb-1">English Essay</p>
                                        <p class="text-xs text-gray-500 flex items-center gap-2">
                                            <i class="fas fa-calendar text-gray-400"></i>
                                            October 10, 2024
                                        </p>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-2xl font-bold text-yellow-600">85%</p>
                                        <p class="text-xs text-gray-500">Grade B+</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }

                <!-- Teacher Specific Sections -->
                @if(profile()?.role === UserRole.TEACHER) {
                    <!-- Subjects -->
                    @if(profile()?.teacher?.teacherSubjects && (profile()?.teacher?.teacherSubjects?.length ?? 0) > 0) {
                        <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 w-full">
                            <div class="bg-gradient-to-r from-green-50 to-emerald-50 px-6 py-4 border-b border-gray-200">
                                <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                    <i class="fas fa-book text-primary"></i>
                                    <span>Subjects</span>
                                    <span class="text-sm font-normal text-gray-600 bg-white px-3 py-1 rounded-full">
                                        {{profile()?.teacher?.teacherSubjects?.length ?? 0}}
                                    </span>
                                </h3>
                            </div>
                            <div class="p-6">
                                <div class="flex flex-wrap gap-3">
                                    @for (teacherSubject of (profile()?.teacher?.teacherSubjects || []); track teacherSubject.id) {
                                        <span class="inline-flex items-center px-4 py-2 rounded-full text-sm font-medium bg-primary/10 text-primary border border-primary/20">
                                            <i class="fas fa-book-open mr-2 text-xs"></i>
                                            {{ teacherSubject.subject?.name }}
                                        </span>
                                    }
                                </div>
                            </div>
                        </div>
                    }

                    <!-- Subject Rates -->
                    @if(profile()?.teacher?.teacherSubjects && (profile()?.teacher?.teacherSubjects?.length ?? 0) > 0) {
                        <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 w-full">
                            <div class="bg-gradient-to-r from-yellow-50 to-amber-50 px-6 py-4 border-b border-gray-200">
                                <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                    <i class="fas fa-dollar-sign text-primary"></i>
                                    <span>Subject-Specific Rates</span>
                                </h3>
                            </div>
                            <div class="p-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    @for (teacherSubject of (profile()?.teacher?.teacherSubjects || []); track teacherSubject.id) {
                                        @if(teacherSubject.hourlyRate || teacherSubject.monthlyRate) {
                                            <div class="bg-gray-50 rounded-lg p-4 border border-gray-200 hover:shadow-md transition">
                                                <h4 class="font-semibold text-gray-900 mb-3 flex items-center gap-2">
                                                    <i class="fas fa-bookmark text-primary"></i>
                                                    {{ teacherSubject.subject?.name }}
                                                </h4>
                                                <div class="grid grid-cols-2 gap-3">
                                                    @if(teacherSubject.hourlyRate) {
                                                        <div class="text-center p-3 bg-blue-50 rounded-lg border border-blue-200">
                                                            <p class="text-xs text-gray-500 mb-1">Hourly</p>
                                                            <p class="text-lg font-bold text-blue-600">${{teacherSubject.hourlyRate}}</p>
                                                        </div>
                                                    }
                                                    @if(teacherSubject.monthlyRate) {
                                                        <div class="text-center p-3 bg-green-50 rounded-lg border border-green-200">
                                                            <p class="text-xs text-gray-500 mb-1">Monthly</p>
                                                            <p class="text-lg font-bold text-green-600">${{teacherSubject.monthlyRate}}</p>
                                                        </div>
                                                    }
                                                </div>
                                            </div>
                                        }
                                    }
                                </div>
                            </div>
                        </div>
                    }

                    <!-- Education -->
                    @if(profile()?.educations && (profile()?.educations?.length ?? 0) > 0) {
                        <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 w-full">
                            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200">
                                <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                    <i class="fas fa-graduation-cap text-primary"></i>
                                    <span>Education</span>
                                    <span class="text-sm font-normal text-gray-600 bg-white px-3 py-1 rounded-full">
                                        {{profile()?.educations?.length ?? 0}}
                                    </span>
                                </h3>
                            </div>
                            <div class="p-6 space-y-4">
                                @for (education of (profile()?.educations || []); track education.id) {
                                    <div class="bg-gray-50 rounded-lg p-4 border border-gray-200 hover:shadow-md transition">
                                        <h4 class="text-lg font-semibold text-gray-900 mb-1">{{ education.degreeName }}</h4>
                                        <p class="text-gray-600 mb-2 flex items-center gap-2">
                                            <i class="fas fa-university text-primary text-sm"></i>
                                            {{ education.instituteName }}
                                        </p>
                                        <p class="text-sm text-gray-500 flex items-center gap-2">
                                            <i class="fas fa-calendar text-gray-400"></i>
                                            {{ education.startedYear }} - {{ education.isStillStudying ? 'Present' : (education.endedYear || 'N/A') }}
                                            @if (education.isStillStudying) {
                                                <span class="ml-2 px-2 py-0.5 bg-green-100 text-green-700 rounded text-xs font-medium">
                                                    Ongoing
                                                </span>
                                            }
                                        </p>
                                        @if (education.remarks) {
                                            <p class="text-sm text-gray-600 mt-2">{{ education.remarks }}</p>
                                        }
                                    </div>
                                }
                            </div>
                        </div>
                    }

                    <!-- Availability Schedule -->
                    @if(profile()?.teacher?.availabilities && (profile()?.teacher?.availabilities?.length ?? 0) > 0) {
                        <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 w-full">
                            <div class="bg-gradient-to-r from-indigo-50 to-purple-50 px-6 py-4 border-b border-gray-200">
                                <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
                                    <i class="fas fa-calendar-alt text-primary"></i>
                                    <span>Availability Schedule</span>
                                    <span class="text-sm font-normal text-gray-600 bg-white px-3 py-1 rounded-full">
                                        {{profile()?.teacher?.availabilities?.length ?? 0}} slot{{(profile()?.teacher?.availabilities?.length ?? 0) !== 1 ? 's' : ''}}
                                    </span>
                                </h3>
                            </div>
                            <div class="p-6">
                                <div class="space-y-4">
                                    @for (dayGroup of getGroupedAvailabilitySlots(); track dayGroup.day) {
                                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                                            <div class="bg-gray-50 px-4 py-3 border-b border-gray-200">
                                                <div class="flex items-center gap-2">
                                                    <i class="fas fa-calendar-day text-primary"></i>
                                                    <span class="font-semibold text-gray-900 capitalize">{{dayGroup.day}}</span>
                                                    <span class="text-xs text-gray-500 bg-white px-2 py-0.5 rounded">
                                                        {{dayGroup.slots.length}} slot{{dayGroup.slots.length !== 1 ? 's' : ''}}
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="divide-y divide-gray-100">
                                                @for (slot of dayGroup.slots; track slot.dayOfWeek + slot.startTime + slot.endTime) {
                                                    <div class="px-4 py-3 hover:bg-gray-50 transition-colors">
                                                        <div class="flex items-center gap-3 text-sm text-gray-700">
                                                            <i class="fas fa-clock text-gray-400"></i>
                                                            <span class="font-medium">{{formatTime(slot.startTime)}} - {{formatTime(slot.endTime)}}</span>
                                                            <span class="text-gray-400">â€¢</span>
                                                            <span class="text-gray-600">{{calculateDuration(slot.startTime, slot.endTime)}}</span>
                                                        </div>
                                                    </div>
                                                }
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    }
                }
            </div>
        </div>
    </div>
</div>
} @else if(isLoading()) {
<!-- Skeleton Loader -->
<div class="w-full min-h-screen bg-gray-50 flex items-center justify-center">
    <div class="text-center">
        <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-primary mx-auto mb-4"></div>
        <p class="text-gray-600 font-medium">Loading profile...</p>
    </div>
</div>
} @else {
<div class="w-full min-h-screen bg-gray-50 flex items-center justify-center">
    <div class="text-center">
        <i class="fas fa-user-slash text-6xl text-gray-300 mb-4"></i>
        <p class="text-xl font-semibold text-gray-700 mb-2">No profile found</p>
        <p class="text-gray-500">Please complete your profile setup</p>
    </div>
</div>
}
